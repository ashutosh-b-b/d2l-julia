import{_ as n,c as s,o as l,aA as e,j as i,a}from"./chunks/framework.DjA5121Y.js";const W1=JSON.parse('{"title":"Batch Normalization","description":"","frontmatter":{},"headers":[],"relativePath":"CH7.ModernConvolutionalNeuralNetworks/MCNN_5.md","filePath":"CH7.ModernConvolutionalNeuralNetworks/MCNN_5.md","lastUpdated":null}'),p={name:"CH7.ModernConvolutionalNeuralNetworks/MCNN_5.md"},o={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.477ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.75ex",height:"1.984ex",role:"img",focusable:"false",viewBox:"0 -666 2541.6 877","aria-hidden":"true"},h={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Q={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.198ex",height:"1.738ex",role:"img",focusable:"false",viewBox:"0 -686 2739.6 768","aria-hidden":"true"},d={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.073ex",height:"1.902ex",role:"img",focusable:"false",viewBox:"0 -683 3126.5 840.8","aria-hidden":"true"},c={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.486ex",height:"1.645ex",role:"img",focusable:"false",viewBox:"0 -705 657 727","aria-hidden":"true"},T={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.626ex",height:"1.686ex",role:"img",focusable:"false",viewBox:"0 -705 2486.6 745","aria-hidden":"true"},y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"3.299ex",height:"1.545ex",role:"img",focusable:"false",viewBox:"0 -683 1458 683","aria-hidden":"true"},L={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},f={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.121ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.474ex",height:"5.506ex",role:"img",focusable:"false",viewBox:"0 -1496 11701.5 2433.6","aria-hidden":"true"},E={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.477ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.841ex",height:"2.333ex",role:"img",focusable:"false",viewBox:"0 -820 1255.6 1031","aria-hidden":"true"},w={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.791ex",height:"2.212ex",role:"img",focusable:"false",viewBox:"0 -812 1233.6 977.6","aria-hidden":"true"},F={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.486ex",height:"1.645ex",role:"img",focusable:"false",viewBox:"0 -705 657 727","aria-hidden":"true"},b={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.477ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.396ex",height:"1.498ex",role:"img",focusable:"false",viewBox:"0 -451 617 662","aria-hidden":"true"},C={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.493ex",height:"2.025ex",role:"img",focusable:"false",viewBox:"0 -701 660 895","aria-hidden":"true"},D={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.373ex",height:"1.005ex",role:"img",focusable:"false",viewBox:"0 -444 607 444","aria-hidden":"true"},Z={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.477ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.841ex",height:"2.333ex",role:"img",focusable:"false",viewBox:"0 -820 1255.6 1031","aria-hidden":"true"},_={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.791ex",height:"2.212ex",role:"img",focusable:"false",viewBox:"0 -812 1233.6 977.6","aria-hidden":"true"},B={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.477ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.841ex",height:"2.333ex",role:"img",focusable:"false",viewBox:"0 -820 1255.6 1031","aria-hidden":"true"},S={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.791ex",height:"2.212ex",role:"img",focusable:"false",viewBox:"0 -812 1233.6 977.6","aria-hidden":"true"},P={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},N={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.814ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.003ex",height:"5.85ex",role:"img",focusable:"false",viewBox:"0 -1342 20775.3 2585.8","aria-hidden":"true"},I={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.067ex",height:"1.597ex",role:"img",focusable:"false",viewBox:"0 -666 2239.6 706","aria-hidden":"true"},q={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.477ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.841ex",height:"2.333ex",role:"img",focusable:"false",viewBox:"0 -820 1255.6 1031","aria-hidden":"true"},J={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},W={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.791ex",height:"2.212ex",role:"img",focusable:"false",viewBox:"0 -812 1233.6 977.6","aria-hidden":"true"},Y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.018ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.552ex",height:"1.855ex",role:"img",focusable:"false",viewBox:"0 -812 686 820","aria-hidden":"true"},$={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.477ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.602ex",height:"2.333ex",role:"img",focusable:"false",viewBox:"0 -820 708 1031","aria-hidden":"true"},i1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.373ex",height:"1.005ex",role:"img",focusable:"false",viewBox:"0 -444 607 444","aria-hidden":"true"},a1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.275ex",height:"1.756ex",role:"img",focusable:"false",viewBox:"0 -694 3657.4 776","aria-hidden":"true"},l1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},e1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.016ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.69ex",height:"1.568ex",role:"img",focusable:"false",viewBox:"0 -686 1189 693","aria-hidden":"true"},n1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.014ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.446ex",height:"1.584ex",role:"img",focusable:"false",viewBox:"0 -694 639 700","aria-hidden":"true"},o1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.348ex",height:"2.034ex",role:"img",focusable:"false",viewBox:"0 -694 596 899","aria-hidden":"true"},h1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Q1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.446ex",height:"1.57ex",role:"img",focusable:"false",viewBox:"0 -694 639 694","aria-hidden":"true"},d1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},k1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"21.534ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 9518 1000","aria-hidden":"true"},c1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.986ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 878 453","aria-hidden":"true"},T1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.138ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 503 636","aria-hidden":"true"},y1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.041ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 460 636","aria-hidden":"true"},L1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.434ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 3285.9 636","aria-hidden":"true"},E1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.357ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 600 453","aria-hidden":"true"},w1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.373ex",height:"1.005ex",role:"img",focusable:"false",viewBox:"0 -444 607 444","aria-hidden":"true"},F1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},H1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.767ex"},xmlns:"http://www.w3.org/2000/svg",width:"21.282ex",height:"5.129ex",role:"img",focusable:"false",viewBox:"0 -1486 9406.6 2267","aria-hidden":"true"},b1={class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},M1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"42.744ex",height:"6.354ex",role:"img",focusable:"false",viewBox:"0 -1562.5 18893 2808.5","aria-hidden":"true"},C1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.067ex",height:"1.597ex",role:"img",focusable:"false",viewBox:"0 -666 2239.6 706","aria-hidden":"true"},D1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.919ex",height:"1ex",role:"img",focusable:"false",viewBox:"0 -431 406 442","aria-hidden":"true"},Z1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.954ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7493.6 1000","aria-hidden":"true"},_1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.486ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.596ex",height:"2.106ex",role:"img",focusable:"false",viewBox:"0 -716 2473.6 931","aria-hidden":"true"},B1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.564ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.488ex",height:"2.26ex",role:"img",focusable:"false",viewBox:"0 -749.5 3751.6 999","aria-hidden":"true"},S1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.919ex",height:"1ex",role:"img",focusable:"false",viewBox:"0 -431 406 442","aria-hidden":"true"};function P1(N1,t,I1,X1,q1,G1){return l(),s("div",null,[t[171]||(t[171]=e("",5)),i("p",null,[t[6]||(t[6]=a("When working with data, we often preprocess before training. Choices regarding data preprocessing often make an enormous difference in the final results. Recall our application of MLPs to predicting house prices (:numref:")),t[7]||(t[7]=i("code",null,"sec_kaggle_house",-1)),t[8]||(t[8]=a("). Our first step when working with real data was to standardize our input features to have zero mean ")),i("mjx-container",o,[(l(),s("svg",r,t[0]||(t[0]=[e("",1)]))),t[1]||(t[1]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",null,"="),i("mn",null,"0")])],-1))]),t[9]||(t[9]=a(" and unit variance ")),i("mjx-container",h,[(l(),s("svg",Q,t[2]||(t[2]=[e("",1)]))),t[3]||(t[3]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",{mathvariant:"bold"},"Σ"),i("mo",null,"="),i("mn",{mathvariant:"bold"},"1")])],-1))]),t[10]||(t[10]=a(" across multiple observations [")),t[11]||(t[11]=i("a",{href:"/d2l-julia/previews/PR1/references#friedman1987exploratory"},"125",-1)),t[12]||(t[12]=a("], frequently rescaling the latter so that the diagonal is unity, i.e., ")),i("mjx-container",d,[(l(),s("svg",k,t[4]||(t[4]=[e("",1)]))),t[5]||(t[5]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("msub",null,[i("mi",{mathvariant:"normal"},"Σ"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",null,"i"),i("mi",null,"i")])]),i("mo",null,"="),i("mn",null,"1")])],-1))]),t[13]||(t[13]=a(". Yet another strategy is to rescale vectors to unit length, possibly zero mean ")),t[14]||(t[14]=i("em",null,"per observation",-1)),t[15]||(t[15]=a(". This can work well, e.g., for spatial sensor data. These preprocessing techniques and many others, are beneficial for keeping the estimation problem well controlled. For a review of feature selection and extraction see the article of ")),t[16]||(t[16]=i("a",{href:"/d2l-julia/previews/PR1/references#guyon2008feature"},[a("Guyon "),i("em",null,"et al."),a(" [126]")],-1)),t[17]||(t[17]=a(", for example. Standardizing vectors also has the nice side-effect of constraining the function complexity of functions that act upon it. For instance, the celebrated radius-margin bound [")),t[18]||(t[18]=i("a",{href:"/d2l-julia/previews/PR1/references#Vapnik95"},"127",-1)),t[19]||(t[19]=a("] in support vector machines and the Perceptron Convergence Theorem [")),t[20]||(t[20]=i("a",{href:"/d2l-julia/previews/PR1/references#Novikoff62"},"128",-1)),t[21]||(t[21]=a("] rely on inputs of bounded norm."))]),t[172]||(t[172]=e("",5)),i("p",null,[t[28]||(t[28]=a("Denote by ")),i("mjx-container",c,[(l(),s("svg",m,t[22]||(t[22]=[e("",1)]))),t[23]||(t[23]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])],-1))]),t[29]||(t[29]=a(" a minibatch and let ")),i("mjx-container",T,[(l(),s("svg",g,t[24]||(t[24]=[e("",1)]))),t[25]||(t[25]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",null,"∈"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])],-1))]),t[30]||(t[30]=a(" be an input to batch normalization (")),i("mjx-container",y,[(l(),s("svg",u,t[26]||(t[26]=[e("",1)]))),t[27]||(t[27]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mtext",null,"BN")])],-1))]),t[31]||(t[31]=a("). In this case the batch normalization is defined as follows:"))]),i("mjx-container",L,[(l(),s("svg",f,t[32]||(t[32]=[e("",1)]))),t[33]||(t[33]=i("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("mtext",null,"BN"),i("mo",{stretchy:"false"},"("),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",{stretchy:"false"},")"),i("mo",null,"="),i("mi",{mathvariant:"bold-italic"},"γ"),i("mo",null,"⊙"),i("mfrac",null,[i("mrow",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",null,"−"),i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])]),i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"σ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])]),i("mo",null,"+"),i("mi",{mathvariant:"bold-italic"},"β"),i("mo",null,".")])],-1))]),t[173]||(t[173]=i("p",null,[a(":eqlabel:"),i("code",null,"eq_batchnorm")],-1)),i("p",null,[t[46]||(t[46]=a("In :eqref:")),t[47]||(t[47]=i("code",null,"eq_batchnorm",-1)),t[48]||(t[48]=a(", ")),i("mjx-container",E,[(l(),s("svg",x,t[34]||(t[34]=[e("",1)]))),t[35]||(t[35]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])])],-1))]),t[49]||(t[49]=a(" is the sample mean and ")),i("mjx-container",w,[(l(),s("svg",v,t[36]||(t[36]=[e("",1)]))),t[37]||(t[37]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"σ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])])],-1))]),t[50]||(t[50]=a(" is the sample standard deviation of the minibatch ")),i("mjx-container",F,[(l(),s("svg",H,t[38]||(t[38]=[e("",1)]))),t[39]||(t[39]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])],-1))]),t[51]||(t[51]=a(". After applying standardization, the resulting minibatch has zero mean and unit variance. The choice of unit variance (rather than some other magic number) is arbitrary. We recover this degree of freedom by including an elementwise ")),t[52]||(t[52]=i("em",null,"scale parameter",-1)),t[53]||(t[53]=a()),i("mjx-container",b,[(l(),s("svg",M,t[40]||(t[40]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D738",d:"M5 269Q5 285 19 312T57 368T124 421T215 451H241Q274 451 303 439T353 406T389 361T416 311T432 266T442 232L444 220L446 216L450 226Q473 278 513 357T561 441Q566 444 584 444H594Q617 444 617 430Q617 426 596 389T536 273T462 110L452 84L451 70Q447 12 427 -76T388 -192Q375 -211 355 -211Q339 -211 332 -198T325 -171Q325 -114 386 64L393 84V98Q393 181 371 241Q360 280 319 303T210 327Q158 327 126 317T84 296T68 272T59 258Q55 256 36 256Q23 256 18 256T9 260T5 269Z",style:{"stroke-width":"3"}})])])],-1)]))),t[41]||(t[41]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",{mathvariant:"bold-italic"},"γ")])],-1))]),t[54]||(t[54]=a(" and ")),t[55]||(t[55]=i("em",null,"shift parameter",-1)),t[56]||(t[56]=a()),i("mjx-container",C,[(l(),s("svg",V,t[42]||(t[42]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D737",d:"M59 -194H49Q31 -194 28 -182Q28 -178 107 139T192 473Q212 533 248 580T324 652T395 689T450 701H461Q514 701 551 688T605 652T630 607T637 561Q637 546 634 526T611 465T556 393Q572 382 590 347T608 262Q608 146 522 69T299 -8Q279 -8 261 -6T228 2T204 13T183 26T169 37T157 48L150 56L120 -64Q113 -90 104 -128Q93 -175 89 -184T73 -194H59ZM531 592Q531 651 463 651Q399 651 341 600T253 466Q250 458 217 327T182 185Q180 176 180 159Q180 108 212 76T301 44Q330 44 354 51T393 65T423 91T444 118T459 151T468 179T475 206Q490 264 491 296Q491 313 489 326T484 345L482 350Q481 350 477 348T464 344T444 340T413 335T372 333T334 334T301 340T274 355T265 380Q265 444 397 444Q425 444 445 441T476 436L485 433Q489 433 499 458Q509 482 520 527T531 592ZM424 390Q424 393 389 393Q383 393 374 393T362 392Q348 392 333 388Q345 384 379 384Q424 384 424 390Z",style:{"stroke-width":"3"}})])])],-1)]))),t[43]||(t[43]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",{mathvariant:"bold-italic"},"β")])],-1))]),t[57]||(t[57]=a(" that have the same shape as ")),i("mjx-container",D,[(l(),s("svg",A,t[44]||(t[44]=[e("",1)]))),t[45]||(t[45]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")])])],-1))]),t[58]||(t[58]=a(". Both are parameters that need to be learned as part of model training."))]),i("p",null,[t[67]||(t[67]=a("The variable magnitudes for intermediate layers cannot diverge during training since batch normalization actively centers and rescales them back to a given mean and size (via ")),i("mjx-container",Z,[(l(),s("svg",j,t[59]||(t[59]=[e("",1)]))),t[60]||(t[60]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])])],-1))]),t[68]||(t[68]=a(" and ")),i("mjx-container",_,[(l(),s("svg",z,t[61]||(t[61]=[e("",1)]))),t[62]||(t[62]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"σ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])])])],-1))]),t[69]||(t[69]=a("). Practical experience confirms that, as alluded to when discussing feature rescaling, batch normalization seems to allow for more aggressive learning rates. We calculate ")),i("mjx-container",B,[(l(),s("svg",R,t[63]||(t[63]=[e("",1)]))),t[64]||(t[64]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])])],-1))]),t[70]||(t[70]=a(" and ")),i("mjx-container",S,[(l(),s("svg",O,t[65]||(t[65]=[e("",1)]))),t[66]||(t[66]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"σ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])])])],-1))]),t[71]||(t[71]=a(" in :eqref:")),t[72]||(t[72]=i("code",null,"eq_batchnorm",-1)),t[73]||(t[73]=a(" as follows:"))]),i("mjx-container",P,[(l(),s("svg",N,t[74]||(t[74]=[e("",1)]))),t[75]||(t[75]=i("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])]),i("mo",null,"="),i("mfrac",null,[i("mn",null,"1"),i("mrow",null,[i("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")]),i("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),i("munder",null,[i("mo",{"data-mjx-texclass":"OP"},"∑"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",null,"∈"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mtext",null," and "),i("msubsup",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"σ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")]),i("mn",null,"2")]),i("mo",null,"="),i("mfrac",null,[i("mn",null,"1"),i("mrow",null,[i("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")]),i("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),i("munder",null,[i("mo",{"data-mjx-texclass":"OP"},"∑"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",null,"∈"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])]),i("mo",{stretchy:"false"},"("),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",null,"−"),i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])]),i("msup",null,[i("mo",{stretchy:"false"},")"),i("mn",null,"2")]),i("mo",null,"+"),i("mi",null,"ϵ"),i("mo",null,".")])],-1))]),i("p",null,[t[82]||(t[82]=a("Note that we add a small constant ")),i("mjx-container",I,[(l(),s("svg",X,t[76]||(t[76]=[e("",1)]))),t[77]||(t[77]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"ϵ"),i("mo",null,">"),i("mn",null,"0")])],-1))]),t[83]||(t[83]=a(" to the variance estimate to ensure that we never attempt division by zero, even in cases where the empirical variance estimate might be very small or vanish. The estimates ")),i("mjx-container",q,[(l(),s("svg",G,t[78]||(t[78]=[e("",1)]))),t[79]||(t[79]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])])],-1))]),t[84]||(t[84]=a(" and ")),i("mjx-container",J,[(l(),s("svg",W,t[80]||(t[80]=[e("",1)]))),t[81]||(t[81]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("msub",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"σ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"B")])])])])],-1))]),t[85]||(t[85]=a(" counteract the scaling issue by using noisy estimates of mean and variance. You might think that this noisiness should be a problem. On the contrary, it is actually beneficial."))]),i("p",null,[t[90]||(t[90]=a("This turns out to be a recurring theme in deep learning. For reasons that are not yet well-characterized theoretically, various sources of noise in optimization often lead to faster training and less overfitting: this variation appears to act as a form of regularization. ")),t[91]||(t[91]=i("a",{href:"/d2l-julia/previews/PR1/references#Teye_Azizpour_Smith_2018"},[a("Teye "),i("em",null,"et al."),a(" [133]")],-1)),t[92]||(t[92]=a(" and ")),t[93]||(t[93]=i("a",{href:"/d2l-julia/previews/PR1/references#Luo_Wang_Shao_ea_2018"},[a("Luo "),i("em",null,"et al."),a(" [134]")],-1)),t[94]||(t[94]=a(' related the properties of batch normalization to Bayesian priors and penalties, respectively. In particular, this sheds some light on the puzzle of why batch normalization works best for moderate minibatch sizes in the 50–100 range. This particular size of minibatch seems to inject just the "right amount" of noise per layer, both in terms of scale via ')),i("mjx-container",Y,[(l(),s("svg",U,t[86]||(t[86]=[e("",1)]))),t[87]||(t[87]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"σ"),i("mo",{stretchy:"false"},"^")])])])],-1))]),t[95]||(t[95]=a(", and in terms of offset via ")),i("mjx-container",$,[(l(),s("svg",K,t[88]||(t[88]=[e("",1)]))),t[89]||(t[89]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",{mathvariant:"bold-italic"},"μ"),i("mo",{stretchy:"false"},"^")])])])],-1))]),t[96]||(t[96]=a(": a larger minibatch regularizes less due to the more stable estimates, whereas tiny minibatches destroy useful signal due to high variance. Exploring this direction further, considering alternative types of preprocessing and filtering may yet lead to other effective types of regularization."))]),t[174]||(t[174]=e("",4)),i("p",null,[t[109]||(t[109]=a("When applying batch normalization to fully connected layers, ")),t[110]||(t[110]=i("a",{href:"/d2l-julia/previews/PR1/references#Ioffe_Szegedy_2015"},"Ioffe and Szegedy [61]",-1)),t[111]||(t[111]=a(", in their original paper inserted batch normalization after the affine transformation and ")),t[112]||(t[112]=i("em",null,"before",-1)),t[113]||(t[113]=a(" the nonlinear activation function. Later applications experimented with inserting batch normalization right ")),t[114]||(t[114]=i("em",null,"after",-1)),t[115]||(t[115]=a(" activation functions. Denoting the input to the fully connected layer by ")),i("mjx-container",i1,[(l(),s("svg",t1,t[97]||(t[97]=[e("",1)]))),t[98]||(t[98]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")])])],-1))]),t[116]||(t[116]=a(", the affine transformation by ")),i("mjx-container",a1,[(l(),s("svg",s1,t[99]||(t[99]=[e("",1)]))),t[100]||(t[100]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"W")]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",null,"+"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"b")])])],-1))]),t[117]||(t[117]=a(" (with the weight parameter ")),i("mjx-container",l1,[(l(),s("svg",e1,t[101]||(t[101]=[e("",1)]))),t[102]||(t[102]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"W")])])],-1))]),t[118]||(t[118]=a(" and the bias parameter ")),i("mjx-container",n1,[(l(),s("svg",p1,t[103]||(t[103]=[e("",1)]))),t[104]||(t[104]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"b")])])],-1))]),t[119]||(t[119]=a("), and the activation function by ")),i("mjx-container",o1,[(l(),s("svg",r1,t[105]||(t[105]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D719",d:"M409 688Q413 694 421 694H429H442Q448 688 448 686Q448 679 418 563Q411 535 404 504T392 458L388 442Q388 441 397 441T429 435T477 418Q521 397 550 357T579 260T548 151T471 65T374 11T279 -10H275L251 -105Q245 -128 238 -160Q230 -192 227 -198T215 -205H209Q189 -205 189 -198Q189 -193 211 -103L234 -11Q234 -10 226 -10Q221 -10 206 -8T161 6T107 36T62 89T43 171Q43 231 76 284T157 370T254 422T342 441Q347 441 348 445L378 567Q409 686 409 688ZM122 150Q122 116 134 91T167 53T203 35T237 27H244L337 404Q333 404 326 403T297 395T255 379T211 350T170 304Q152 276 137 237Q122 191 122 150ZM500 282Q500 320 484 347T444 385T405 400T381 404H378L332 217L284 29Q284 27 285 27Q293 27 317 33T357 47Q400 66 431 100T475 170T494 234T500 282Z",style:{"stroke-width":"3"}})])])],-1)]))),t[106]||(t[106]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"ϕ")])],-1))]),t[120]||(t[120]=a(", we can express the computation of a batch-normalization-enabled, fully connected layer output ")),i("mjx-container",h1,[(l(),s("svg",Q1,t[107]||(t[107]=[e("",1)]))),t[108]||(t[108]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"h")])])],-1))]),t[121]||(t[121]=a(" as follows:"))]),i("mjx-container",d1,[(l(),s("svg",k1,t[122]||(t[122]=[e("",1)]))),t[123]||(t[123]=i("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"h")]),i("mo",null,"="),i("mi",null,"ϕ"),i("mo",{stretchy:"false"},"("),i("mtext",null,"BN"),i("mo",{stretchy:"false"},"("),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"W")]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",null,"+"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"b")]),i("mo",{stretchy:"false"},")"),i("mo",{stretchy:"false"},")"),i("mo",null,".")])],-1))]),t[175]||(t[175]=i("p",null,[a("Recall that mean and variance are computed on the "),i("em",null,"same"),a(" minibatch on which the transformation is applied.")],-1)),t[176]||(t[176]=i("h3",{id:"Convolutional-Layers",tabindex:"-1"},[a("Convolutional Layers "),i("a",{class:"header-anchor",href:"#Convolutional-Layers","aria-label":'Permalink to "Convolutional Layers {#Convolutional-Layers}"'},"​")],-1)),t[177]||(t[177]=i("p",null,[a("Similarly, with convolutional layers, we can apply batch normalization after the convolution but before the nonlinear activation function. The key difference from batch normalization in fully connected layers is that we apply the operation on a per-channel basis "),i("em",null,"across all locations"),a(". This is compatible with our assumption of translation invariance that led to convolutions: we assumed that the specific location of a pattern within an image was not critical for the purpose of understanding.")],-1)),i("p",null,[t[132]||(t[132]=a("Assume that our minibatches contain ")),i("mjx-container",c1,[(l(),s("svg",m1,t[124]||(t[124]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D45A",d:"M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)]))),t[125]||(t[125]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"m")])],-1))]),t[133]||(t[133]=a(" examples and that for each channel, the output of the convolution has height ")),i("mjx-container",T1,[(l(),s("svg",g1,t[126]||(t[126]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D45D",d:"M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z",style:{"stroke-width":"3"}})])])],-1)]))),t[127]||(t[127]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"p")])],-1))]),t[134]||(t[134]=a(" and width ")),i("mjx-container",y1,[(l(),s("svg",u1,t[128]||(t[128]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D45E",d:"M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1)]))),t[129]||(t[129]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"q")])],-1))]),t[135]||(t[135]=a(". For convolutional layers, we carry out each batch normalization over the ")),i("mjx-container",L1,[(l(),s("svg",f1,t[130]||(t[130]=[e("",1)]))),t[131]||(t[131]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"m"),i("mo",null,"⋅"),i("mi",null,"p"),i("mo",null,"⋅"),i("mi",null,"q")])],-1))]),t[136]||(t[136]=a(" elements per output channel simultaneously. Thus, we collect the values over all spatial locations when computing the mean and variance and consequently apply the same mean and variance within a given channel to normalize the value at each spatial location. Each channel has its own scale and shift parameters, both of which are scalars."))]),t[178]||(t[178]=i("h3",{id:"subsec_layer-normalization-in-bn",tabindex:"-1"},[a("Layer Normalization "),i("a",{class:"header-anchor",href:"#subsec_layer-normalization-in-bn","aria-label":'Permalink to "Layer Normalization {#subsec_layer-normalization-in-bn}"'},"​")],-1)),i("p",null,[t[141]||(t[141]=a("Note that in the context of convolutions the batch normalization is well defined even for minibatches of size 1: after all, we have all the locations across an image to average. Consequently, mean and variance are well defined, even if it is just within a single observation. This consideration led ")),t[142]||(t[142]=i("a",{href:"/d2l-julia/previews/PR1/references#Ba_Kiros_Hinton_2016"},[a("Ba "),i("em",null,"et al."),a(" [129]")],-1)),t[143]||(t[143]=a(" to introduce the notion of ")),t[144]||(t[144]=i("em",null,"layer normalization",-1)),t[145]||(t[145]=a(". It works just like a batch norm, only that it is applied to one observation at a time. Consequently both the offset and the scaling factor are scalars. For an ")),i("mjx-container",E1,[(l(),s("svg",x1,t[137]||(t[137]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)]))),t[138]||(t[138]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"n")])],-1))]),t[146]||(t[146]=a("-dimensional vector ")),i("mjx-container",w1,[(l(),s("svg",v1,t[139]||(t[139]=[e("",1)]))),t[140]||(t[140]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")])])],-1))]),t[147]||(t[147]=a(", layer norms are given by"))]),i("mjx-container",F1,[(l(),s("svg",H1,t[148]||(t[148]=[e("",1)]))),t[149]||(t[149]=i("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",{stretchy:"false"},"→"),i("mtext",null,"LN"),i("mo",{stretchy:"false"},"("),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",{stretchy:"false"},")"),i("mo",null,"="),i("mfrac",null,[i("mrow",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",null,"−"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",null,"μ"),i("mo",{stretchy:"false"},"^")])])]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",null,"σ"),i("mo",{stretchy:"false"},"^")])])]),i("mo",null,",")])],-1))]),t[179]||(t[179]=i("p",null,"where scaling and offset are applied coefficient-wise and given by",-1)),i("mjx-container",b1,[(l(),s("svg",M1,t[150]||(t[150]=[e("",1)]))),t[151]||(t[151]=i("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",null,"μ"),i("mo",{stretchy:"false"},"^")])]),i("mrow",{"data-mjx-texclass":"REL"},[i("mover",null,[i("mrow",{"data-mjx-texclass":"OP"},[i("mo",null,"=")]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mtext",null,"def")])])]),i("mfrac",null,[i("mn",null,"1"),i("mi",null,"n")]),i("munderover",null,[i("mo",{"data-mjx-texclass":"OP"},"∑"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",null,"i"),i("mo",null,"="),i("mn",null,"1")]),i("mi",null,"n")]),i("msub",null,[i("mi",null,"x"),i("mi",null,"i")]),i("mtext",null," and "),i("msup",null,[i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",null,"σ"),i("mo",{stretchy:"false"},"^")])]),i("mn",null,"2")]),i("mrow",{"data-mjx-texclass":"REL"},[i("mover",null,[i("mrow",{"data-mjx-texclass":"OP"},[i("mo",null,"=")]),i("mrow",{"data-mjx-texclass":"ORD"},[i("mtext",null,"def")])])]),i("mfrac",null,[i("mn",null,"1"),i("mi",null,"n")]),i("munderover",null,[i("mo",{"data-mjx-texclass":"OP"},"∑"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",null,"i"),i("mo",null,"="),i("mn",null,"1")]),i("mi",null,"n")]),i("mo",{stretchy:"false"},"("),i("msub",null,[i("mi",null,"x"),i("mi",null,"i")]),i("mo",null,"−"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mover",null,[i("mi",null,"μ"),i("mo",{stretchy:"false"},"^")])]),i("msup",null,[i("mo",{stretchy:"false"},")"),i("mn",null,"2")]),i("mo",null,"+"),i("mi",null,"ϵ"),i("mo",null,".")])],-1))]),i("p",null,[t[164]||(t[164]=a("As before we add a small offset ")),i("mjx-container",C1,[(l(),s("svg",V1,t[152]||(t[152]=[e("",1)]))),t[153]||(t[153]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"ϵ"),i("mo",null,">"),i("mn",null,"0")])],-1))]),t[165]||(t[165]=a(" to prevent division by zero. One of the major benefits of using layer normalization is that it prevents divergence. After all, ignoring ")),i("mjx-container",D1,[(l(),s("svg",A1,t[154]||(t[154]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D716",d:"M227 -11Q149 -11 95 41T40 174Q40 262 87 322Q121 367 173 396T287 430Q289 431 329 431H367Q382 426 382 411Q382 385 341 385H325H312Q191 385 154 277L150 265H327Q340 256 340 246Q340 228 320 219H138V217Q128 187 128 143Q128 77 160 52T231 26Q258 26 284 36T326 57T343 68Q350 68 354 58T358 39Q358 36 357 35Q354 31 337 21T289 0T227 -11Z",style:{"stroke-width":"3"}})])])],-1)]))),t[155]||(t[155]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"ϵ")])],-1))]),t[166]||(t[166]=a(", the output of the layer normalization is scale independent. That is, we have ")),i("mjx-container",Z1,[(l(),s("svg",j1,t[156]||(t[156]=[e("",1)]))),t[157]||(t[157]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mtext",null,"LN"),i("mo",{stretchy:"false"},"("),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",{stretchy:"false"},")"),i("mo",null,"≈"),i("mtext",null,"LN"),i("mo",{stretchy:"false"},"("),i("mi",null,"α"),i("mrow",{"data-mjx-texclass":"ORD"},[i("mi",{mathvariant:"bold"},"x")]),i("mo",{stretchy:"false"},")")])],-1))]),t[167]||(t[167]=a(" for any choice of ")),i("mjx-container",_1,[(l(),s("svg",z1,t[158]||(t[158]=[e("",1)]))),t[159]||(t[159]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"α"),i("mo",null,"≠"),i("mn",null,"0")])],-1))]),t[168]||(t[168]=a(". This becomes an equality for ")),i("mjx-container",B1,[(l(),s("svg",R1,t[160]||(t[160]=[e("",1)]))),t[161]||(t[161]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),i("mi",null,"α"),i("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),i("mo",{accent:"false",stretchy:"false"},"→"),i("mi",{mathvariant:"normal"},"∞")])],-1))]),t[169]||(t[169]=a(" (the approximate equality is due to the offset ")),i("mjx-container",S1,[(l(),s("svg",O1,t[162]||(t[162]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D716",d:"M227 -11Q149 -11 95 41T40 174Q40 262 87 322Q121 367 173 396T287 430Q289 431 329 431H367Q382 426 382 411Q382 385 341 385H325H312Q191 385 154 277L150 265H327Q340 256 340 246Q340 228 320 219H138V217Q128 187 128 143Q128 77 160 52T231 26Q258 26 284 36T326 57T343 68Q350 68 354 58T358 39Q358 36 357 35Q354 31 337 21T289 0T227 -11Z",style:{"stroke-width":"3"}})])])],-1)]))),t[163]||(t[163]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"ϵ")])],-1))]),t[170]||(t[170]=a(" for the variance)."))]),t[180]||(t[180]=e("",54))])}const Y1=n(p,[["render",P1]]);export{W1 as __pageData,Y1 as default};
